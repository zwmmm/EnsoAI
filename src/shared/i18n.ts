export type Locale = 'en' | 'zh';

export const zhTranslations: Record<string, string> = {
  'Action Panel': '操作面板',
  'Add Repository': '添加仓库',
  'Add Workspace': '新建工作区',
  'Add agent': '添加 Agent',
  Agent: 'Agent',
  'Agent Notifications': 'Agent 通知',
  'Agent session shortcuts': '设置 Agent session 管理快捷键',
  All: '全部',
  'Already at the first change': '已经是第一处差异',
  'Already at the last change': '已经是最后一处差异',
  'Apply on new terminals': '更改后新建终端生效',
  'Apply on new terminals or restart': '更改后需新建终端或重启应用才能生效',
  'Apply on new terminals only': '更改后需新建终端才能生效',
  'Are you sure you want to delete worktree {{name}}?': '确定要删除 worktree {{name}} 吗？',
  'Are you sure you want to discard changes to {{path}}? This cannot be undone.':
    '确定要放弃 {{path}} 的更改吗？此操作不可撤销。',
  'Are you sure you want to exit the app?': '确定要退出应用吗？',
  'Are you sure you want to remove {{name}} from the workspace?':
    '确定要从工作区移除 {{name}} 吗？',
  'Also delete branch {{name}}': '同时删除分支 {{name}}',
  'Auto-detect agent CLI in WSL': '在 WSL 中检测 Agent CLI',
  Background: '背景',
  Branch: '分支',
  'Branch already exists. Choose a different name.': '该分支已存在，请使用其他分支名',
  'Branch name': '新分支名',
  Cancel: '取消',
  'Cancel staging all': '全部取消暂存',
  'Change list': '更改',
  Changes: '更改',
  'Check for updates later': '稍后',
  Chat: '聊天',
  'Choose base branch...': '选择基准分支...',
  'Choose branch...': '选择分支...',
  'Choose workspace first': '请先选择一个工作区',
  'Choose Worktree': '选择 Worktree',
  'Clear terminal': '清除终端',
  Close: '关闭',
  'Close Session': '关闭 Session',
  'Close Tab': '关闭标签',
  Collapse: '折叠',
  'Collapse Repository': '折叠 Repository',
  'Collapse Worktree': '折叠 Worktree',
  'Color scheme': '配色',
  Command: '命令',
  Commit: '提交',
  'Commit failed': '提交失败',
  'Commit in progress...': '提交中...',
  'Commit message': '提交信息',
  'Commit successful': '提交成功',
  Copy: '复制',
  'Copy Path': '复制路径',
  Create: '创建',
  'Create in progress...': '创建中...',
  'Create new branch': '创建新分支',
  'Create Worktree': '创建 Worktree',
  'Create workspace': '新建工作区',
  'Create a new branch and work in a separate directory to handle multiple tasks.':
    '创建新分支并在独立目录中工作，可同时处理多个功能',
  Current: '当前',
  'Custom Agent': '自定义 Agent',
  'Custom CLI tools': '添加自定义 CLI 工具',
  Default: '默认',
  Delete: '删除',
  'Delete file': '删除文件',
  'Delete Worktree': '删除 Worktree',
  Deleted: '已删除',
  Description: '描述',
  'Description (optional)': '描述 (可选)',
  'Developer Tools': '开发者工具',
  Diffs: '差异',
  Discard: '放弃更改',
  'Discard changes': '放弃更改',
  'Discard changes title': '放弃更改',
  'Discard failed': '放弃更改失败',
  'Downloading update': '正在下载更新',
  Edit: '编辑',
  'Edit Agent': '编辑 Agent',
  'Enable notifications': '启用通知',
  English: '英语',
  'Enter a new branch name:': '输入新分支名:',
  'Enter new branch name': '请输入新分支名',
  'Error deleting': '删除失败',
  'Expand Repository': '展开 Repository',
  'Expand Worktree': '展开 Worktree',
  'Failed to create': '创建失败',
  'Failed to load diff': '无法加载差异',
  File: '文件',
  Files: '文件',
  'Filter actions...': '搜索操作...',
  Font: '字体',
  'Font size': '字号',
  'Font weight': '字重',
  'Force delete (ignore uncommitted changes)': '强制删除（忽略未提交的修改）',
  General: '通用',
  Git: 'Git',
  'Git not initialized': '不是 Git 仓库',
  'Go to download': '前往下载',
  Head: '头',
  Help: '帮助',
  History: '历史',
  'Idle time': '空闲时间',
  'Immediate restart': '立即重启',
  'Initializing repository': '初始化仓库',
  Keybindings: '快捷键',
  Language: '语言',
  'Last updated': '最近提交',
  Light: '浅色',
  'List view': '列表视图',
  'Loading...': '加载中...',
  'Local branches': '本地分支',
  Look: '外观',
  'Manage Agent sessions': '设置 Agent session 管理快捷键',
  Main: 'Main',
  More: '查看更多',
  Name: '名称',
  New: '新建',
  'New Session': '新建 Session',
  'New Tab': '新建标签',
  'New Terminal': '新建终端',
  'New Worktree': '新建 Worktree',
  'No changes': '没有更改',
  'No commits yet': '暂无提交记录',
  'No matching actions found': '没有找到匹配的操作',
  'No matching repositories': '未找到仓库',
  'No matching worktrees': '未找到匹配',
  'No matching workspaces': '未找到匹配的工作区',
  'No remote tracking branch': '未关联远程分支',
  'No themes found': '未找到主题',
  'No workspaces': '暂无工作区',
  'No worktrees': '暂无 Worktree',
  'Not installed': '未安装',
  'Notification delay': '空闲时间',
  'Notifications when agent is idle': 'Agent 空闲时发送系统通知',
  'Open in Finder': '在 Finder 中显示',
  'Open in IDE': '在 IDE 中打开',
  'Open in {{app}}': '在 {{app}} 打开',
  'Open settings': '打开设置',
  'Open terminal': '在终端中打开',
  'Open with': '打开方式',
  'Open folder': '打开文件夹',
  Panel: '面板',
  Paste: '粘贴',
  'Pending changes': '未暂存的更改',
  'Please select a workspace first.': '请先选择一个工作区',
  'Please select a worktree first': '请先选择一个 Worktree',
  Primary: '主',
  Refresh: '刷新',
  Remove: '移除',
  'Remove repository': '移除仓库',
  'Remove repository confirm': '移除仓库',
  'Remove repository description': '此操作只会从应用中移除，不会删除本地文件。',
  Renderer: '渲染器',
  'Reset on new terminal': '更改后新建终端生效',
  Resume: '继续',
  'Search branches...': '搜索分支...',
  'Search repositories': '搜索仓库',
  'Search workspaces...': '搜索工作区...',
  'Search worktrees...': '搜索 worktree...',
  'Search worktrees': '搜索 worktree',
  'Select Agent': '选择 Agent',
  'Select all': '全选',
  'Select base branch': '请选择基于哪个分支创建',
  'Select branch': '选择分支...',
  'Select a workspace': '选择工作区',
  'Select a Worktree to start using AI coding assistant':
    '选择一个 Worktree 以开始使用 AI 编码助手',
  'Select a Worktree to view changes': '选择一个 Worktree 以查看更改',
  'Select file to view diff': '从左侧选择文件以查看更改',
  Settings: '设置',
  'Settings...': '设置...',
  Shell: 'Shell',
  'Show in Finder': '在 Finder 中显示',
  'Show in IDE': '在 IDE 中打开',
  'Show in Terminal': '在终端中打开',
  'Start editing': '开始编辑',
  'Start using AI Agent': '开始使用 AI Agent',
  'Starting shell...': '正在启动终端...',
  'Staged changes': '暂存的更改',
  'Staged changes ({count})': '暂存的更改 ({count})',
  Staged: '已暂存',
  Stale: '过期',
  Status: '状态',
  'Stop output notification': 'Agent 停止输出时发送系统通知',
  'Switch to Agent': '切换到 Agent',
  'Switch to File': '切换到 File',
  'Switch to list view': '切换到列表视图',
  'Switch to Terminal': '切换到 Terminal',
  'Switch to tree view': '切换到树状视图',
  'Switch to previous file': '再按一次切换到上一个文件',
  'Switch to next file': '再按一次切换到下一个文件',
  'Sync terminal theme': '同步终端',
  Synced: '已同步',
  Terminal: '终端',
  'Terminal appearance': '自定义终端外观',
  'Terminal renderer and performance settings': '终端渲染与性能设置',
  'Terminal scrollback': '回滚行数',
  'Terminal shortcuts': '设置终端快捷键',
  Theme: '主题',
  'Theme mode': '模式',
  'Tree view': '树状视图',
  'Try a different search term': '尝试使用不同的关键词搜索',
  'Unknown error': '未知错误',
  'Unstaged changes': '未暂存的更改',
  'Unstaged changes ({count})': '更改 ({count})',
  'Untracked files': '未跟踪的文件',
  'Up to date': '已同步',
  'Update ready': '更新已就绪',
  'View diff': '查看差异',
  'View more': '查看更多',
  'Waiting {{seconds}} seconds': '{{seconds}} 秒',
  Workspace: '工作区',
  'Workspace clean': '工作区干净',
  'Workspace is not a Git repository': '当前目录还不是 Git 仓库，初始化后即可使用 Git 功能',
  Worktrees: 'Worktree',
  'Worktree created': '创建 Worktree',
  'Worktree delete description prunable': '该目录已被删除，将清理 git 记录。',
  'Worktree delete description destructive': '这将删除目录及其中所有文件，此操作不可撤销！',
  'Worktree delete force hint': '目录包含未提交的修改，请勾选「强制删除」',
  'Worktree deleted': '已删除',
  'Worktree list empty': '创建第一个 Worktree 开始工作',
  'Worktree not found': '未找到匹配',
  'Worktree path already exists. Choose a different path or branch name.':
    '目录已存在，请选择其他路径或分支名',
  'Worktree search placeholder': '搜索 worktree...',
  'Yes, remove': '移除',
  'You have {{count}} changed files': '{{count}} 个文件已更改',
  'You have no worktrees yet': '暂无 Worktree',
  'Your workspace is clean': '工作区干净',
  '(optional)': '(可选)',
  Add: '添加',
  'Add custom CLI tools': '添加自定义 CLI 工具',
  'Add custom agent': '添加自定义 Agent',
  'Agent sessions': 'Agent Session',
  Appearance: '外观',
  'Base branch': '基于分支',
  'Basic, lower performance': '最基础，性能较差',
  'Bold font weight': '粗体字重',
  Chinese: '中文',
  'Committing...': '提交中...',
  'Configure available AI Agent CLI tools': '配置可用的 AI Agent CLI 工具',
  Detached: '分离',
  'Detached HEAD': '分离 HEAD',
  Enable: '启用',
  'Eye-friendly dark theme': '护眼的暗色主题',
  'Follow system theme': '自动适配系统主题',
  'Good compatibility': '兼容性好',
  Later: '稍后',
  'Main tab switching': '主标签切换',
  'New sessions use the default agent. Long-press the plus to pick another enabled agent. Only Claude supports session persistence for now.':
    '新建会话使用默认 Agent，长按加号可选择其他已启用的 Agent。目前仅 Claude 支持会话持久化。',
  'No custom agents yet': '暂无自定义 Agent',
  Preview: '预览',
  'Remote branches': '远程分支',
  Save: '保存',
  'Set global main tab shortcuts (Cmd on macOS, Win on Windows)':
    '设置全局主标签切换快捷键 (macOS 上是 Cmd,Windows 上是 Win 键)',
  'Short description': '简短描述',
  View: '视图',
  Window: '窗口',
  '(default)': '(默认)',
  '{{command}} completed': '{{command}} 已完成',
  '{{count}} lines': '{{count}} 行',
  '{{count}} seconds': '{{count}} 秒',
  '{{count}} commits ahead': '领先 {{count}} 个提交',
  '{{count}} commits behind': '落后 {{count}} 个提交',
  '(staged)': '(已暂存)',
  '(unstaged)': '(未暂存)',
  Active: '活跃',
  'Active sessions': '活跃会话',
  'Add a Git repository from a local folder to get started': '从本地文件夹添加 Git 仓库开始使用',
  'Best performance (recommended)': '性能最佳，推荐',
  'Bright theme': '明亮的界面主题',
  'Choose display language': '选择界面语言',
  'Choose interface theme': '选择界面的深浅模式',
  'Claude • Ready': 'Claude • 就绪',
  'Clean up records': '清理记录',
  'Click the button in the top right to create your first worktree':
    '点击右上角按钮创建第一个 Worktree',
  'Close Agent Sessions': '关闭 Agent 会话',
  'Close Terminal Sessions': '关闭终端会话',
  'Confirm exit': '确认退出',
  'Create your first worktree to get started': '创建第一个 Worktree 开始工作',
  'Creating...': '创建中...',
  Dark: '深色',
  'Delete failed': '删除失败',
  'Deleting...': '删除中...',
  'Describe your changes...': '描述你的更改...',
  'Diff navigation shortcuts': '设置 Diff 导航快捷键',
  Exit: '退出',
  'Generate with AI': 'AI 生成',
  'Generating...': '生成中...',
  'History lines in the terminal. Higher values use more memory.':
    '终端可向上滚动查看的历史行数，值越大内存占用越高',
  'How long to wait before notifying after the agent stops output.':
    'Agent 停止输出后等待多久发送通知',
  'Initialize repository': '初始化仓库',
  'Just now': '刚刚',
  'Learn More': '了解更多',
  'Loading {{agent}}...': '正在启动 {{agent}}...',
  'Match terminal color scheme': '跟随终端配色方案',
  'New Window': '新建窗口',
  'New version available': '发现新版本',
  'Next change': '下一处差异',
  'Next change (F8, press again to switch file)': '下一处差异 (F8, 再按切换文件)',
  'Next Session': '下一个 Session',
  'Next Tab': '下一个标签',
  'Not a Git repository': '不是 Git 仓库',
  'Open in Terminal': '在终端中打开',
  'Press a shortcut...': '按下快捷键...',
  'Previous change': '上一处差异',
  'Previous change (F7, press again to switch file)': '上一处差异 (F7, 再按切换文件)',
  'Previous Session': '上一个 Session',
  'Previous Tab': '上一个标签',
  Pull: '拉取',
  Push: '推送',
  'Recent commits': '最近提交',
  'Restart now': '立即重启',
  'Save location': '保存位置',
  'Search themes...': '搜索主题...',
  'Select file': '选择文件',
  'Select folder': '选择文件夹',
  'Select a file from the file tree to begin editing': '从左侧文件树中选择文件以开始编辑',
  'Source Control': '源代码管理',
  Stage: '暂存',
  'Stage all': '全部暂存',
  System: '跟随系统',
  'This branch will be created and checked out in the new worktree.':
    '将创建此分支并在新 worktree 中检出',
  'This directory has already been removed; Git records will be cleaned up.':
    '该目录已被删除，将清理 git 记录。',
  'This directory contains uncommitted changes. Please check "Force delete".':
    '目录包含未提交的修改，请勾选「强制删除」',
  'This directory is not a Git repository. Initialize it to enable Git features.':
    '当前目录还不是 Git 仓库，初始化后即可使用 Git 功能',
  'This will delete the directory and all files inside. This action cannot be undone!':
    '这将删除目录及其中所有文件，此操作不可撤销！',
  'This will only remove it from the app and will not delete local files.':
    '此操作只会从应用中移除，不会删除本地文件。',
  'Unable to determine your home directory': '无法获取用户目录',
  Unstage: '取消暂存',
  'Unstage all': '全部取消暂存',
  'Version Control': '版本控制',
  'Version {{version}} has been downloaded. Restart now to install?':
    '新版本 {{version}} 已下载完成，是否立即重启安装？',
  'Version {{version}} is available. Please download it manually.':
    '新版本 {{version}} 已发布，请前往下载页面手动更新。',
  'WSL detection': 'WSL 检测',
  中文: '中文',
};

export function normalizeLocale(input?: string): Locale {
  if (!input) return 'en';
  return input.toLowerCase().startsWith('zh') ? 'zh' : 'en';
}

export function getTranslation(locale: Locale, key: string): string {
  if (locale === 'zh') {
    return zhTranslations[key] ?? key;
  }
  return key;
}

export function translate(
  locale: Locale,
  key: string,
  params?: Record<string, string | number>
): string {
  const template = getTranslation(locale, key);
  if (!params) return template;
  return template.replace(/\{\{(\w+)\}\}/g, (match, token) => {
    const value = params[token];
    return value === undefined ? match : String(value);
  });
}
